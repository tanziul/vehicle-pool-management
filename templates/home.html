{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eGari – Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'pool_app/css/style.css' %}?v=2025">
</head>
<body class="egari-final-body">

    <!-- Curved White Line -->
    <div class="egari-curve"></div>

    <!-- TOP-LEFT: Energypac Logo + Text -->
    <div class="energypac-top-brand">
        <img src="{% static 'pool_app/image/logo.png' %}" alt="Energypac" class="energypac-logo-img">
        <span class="energypac-full-text">Energypac<span class="reg-symbol">®</span></span>
    </div>

    <div class="egari-grid">
        <!-- CENTER-LEFT: eGari + Tagline -->
        <div class="egari-branding">
            <h1 class="egari-title">eGari</h1>
            <p class="egari-tagline">MANAGE AND BOOK YOUR VEHICLE</p>
        </div>

        <!-- RIGHT: Login Card -->
        <div class="egari-login-section">
            <div class="egari-login-card">
                <h2>Login</h2>
                <form method="post" action="{% url 'login' %}">
                    {% csrf_token %}
                    <input type="text" name="username" class="egari-input" placeholder="Username" required>
                    <div class="password-wrapper">
                        <input type="password" name="password" class="egari-input" id="password" placeholder="Password" required>
                        <button type="button" class="password-toggle" id="togglePassword">
                            <i class="bi bi-eye-slash" id="toggleIcon"></i>
                        </button>
                    </div>
                    <button type="submit" class="egari-btn">Login</button>
                </form>

                <!-- Forgot Password Link -->
                <div class="text-center mt-3">
                    <a href="{% url 'password_reset' %}" class="text-primary fw-medium small">
                        Forgot Password?
                    </a>
                </div>

                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-danger mt-3 small">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>

    <script>
        document.getElementById('togglePassword').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const toggleIcon = document.getElementById('toggleIcon');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.classList.remove('bi-eye-slash');
                toggleIcon.classList.add('bi-eye');
            } else {
                passwordInput.type = 'password';
                toggleIcon.classList.remove('bi-eye');
                toggleIcon.classList.add('bi-eye-slash');
            }
        });
    </script>

</body>
</html>
